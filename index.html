<!-- Скрипт для диагностики -->
  <script src="js/diagnostic.js"></script>
  
  <!-- Глобальный индикатор загрузки -->
  <div id="global-loading-overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.98); z-index: 10000; display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <div class="spinner" style="width: 80px; height: 80px; border-width: 8px; border-top-color: #3498db;"></div>
    <h2 style="color: #3498db; margin-top: 20px; text-align: center;">Загрузка приложения</h2>
    <p id="global-loading-status" style="font-size: 16px; margin-top: 15px; text-align: center; max-width: 80%;">Запрос вебхуков с сервера...</p>
  </div>

  <!-- Индикатор загрузки контента (показывается после загрузки приложения) -->
  <div id="loading-spinner" class="container center hidden" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #f8f8f8; z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center;">
    <div class="spinner" style="width: 60px; height: 60px; border-width: 6px; border-top-color: #3498db;"></div>
    <h2 style="color: #3498db; margin-top: 20px; text-align: center;">Загрузка данных курсов</h2>
    <p class="loading-status" style="font-size: 16px; margin-top: 15px; text-align: center; max-width: 80%;">Инициализация...</p>
    <div id="loading-retry-container" class="hidden" style="margin-top: 20px; background-color: #ffeeee; padding: 15px; border-radius: 5px; border-left: 4px solid #ff5555; max-width: 80%;">
      <p style="font-weight: bold; color: #cc0000; text-align: center;">Не удалось загрузить данные. Возможно, проблемы с подключением.</p>
      <button onclick="location.reload()" style="background-color: #ff5555; margin-top: 10px; display: block; width: 200px; margin-left: auto; margin-right: auto; padding: 10px; border: none; border-radius: 4px; color: white; cursor: pointer;">Повторить загрузку</button>
      <p style="font-size: 14px; margin-top: 10px; color: #666; text-align: center;">Если проблема повторяется, обратитесь к администратору.</p>
    </div>
  </div>

<style>
    /* Улучшенные стили для индикаторов загрузки */
    .spinner {
      border: 6px solid rgba(243, 243, 243, 0.6);
      border-top: 6px solid #3498db;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
      margin: 0 auto 20px auto;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    #global-loading-overlay .spinner {
      width: 80px;
      height: 80px;
      border-width: 8px;
    }

    #loading-spinner p {
      margin: 10px 0;
      font-size: 18px;
      color: #333;
    }

    .loading-status {
      font-size: 14px !important;
      color: #666 !important;
      margin-top: 5px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Анимация пульсации для текста статуса */
    @keyframes pulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    #global-loading-status, .loading-status {
      animation: pulse 2s infinite;
    }
  </style>